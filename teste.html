<html>
    <head>
        <title> </title>
        <meta charset="utf-8">
        <script src="js/Chart.js"></script>
        <script src="_src/newGrafico.js"></script>
    </head>
    <body>
        <div id="teste">
            <canvas id="graficoCorrelacao"  height="150" width="150" style="max-height: 300; max-width: 300;"></canvas>
        </div>


        <input type="button" onclick="cria()" value="gerar grafico">
        <input type="button" onclick="apaga()" value="apaga grafico">
        <input type="button" onclick="popula()" value="popula grafico">
        <input type="button" onclick="rem()" value="remove serie">
        <input type="button" onclick="remAll()" value="remove todas series">
        <br>
        x = <input type="text" id="x" > y= <input type="text" id="y"> serie = <input type="text" id="s"><br>
        <input type="button" onclick="add()" value="adiciona ponto">
        <input type="button" onclick="minus()" value="remove ponto">
        <br>
        <input type="text" id="modMovimento" onchange="setaModMovimento(this.value)">
        <br>
        <input type="button" onclick="zoom('x', '+')" value="zoom x +">
        <input type="button" onclick="zoom('x', '-')" value="zoom x -">
        <input type="button" onclick="zoom('y', '+')" value="zoom y +">
        <input type="button" onclick="zoom('y', '-')" value="zoom y -">
        <br>
        <input type="button" onclick="moveX(-1)" value="&larr;">
        <input type="button" onclick="moveX(1)" value="&rarr;">
        <input type="button" onclick="moveY(1)" value="&uarr;">
        <input type="button" onclick="moveY(-1)" value="&darr;">
        <input type="button" onclick="fit()" value="FIT">
        <script>

            function popula(){
                let dados=[];
                for (let i=0;i<10;i++){
                    dados.push({x:Math.random()*5, y:Math.random()*5});
                }
                dados.push({x:-2, y:3});
                dados.push({x:-2, y:-2});
                adicionaDataset('População 1','line',dados,geraRGB(),5,false,false);
            }

            function cria(){
                iniciaVariaveis();
                removeTodosDatasets();
                setaLabelX('aulas');
                setaLabelY('presenças');
                setaTipo('line');
                criaGrafico('graficoCorrelacao');
                //desenha a linha primeiro (deve ser sempre o primeiro dataset)
                adicionaDataset('Linha Divisoria','line',[{x:-1,y:-1},{x:1,y:1}],'#000000',1,true,false);
            }

            function apaga(){
                apagaGrafico();
            }

            function add(){
                x=parseFloat(document.querySelector("#x").value);
                y=parseFloat(document.querySelector("#y").value);
                s=parseFloat(document.querySelector("#s").value);
                adicionaPonto(s,x,y);
            }
            function minus(){
                x=parseFloat(document.querySelector("#x").value);
                y=parseFloat(document.querySelector("#y").value);
                s=parseFloat(document.querySelector("#s").value);
                removePonto(s,x,y);
            }

            function rem(){
                let s =parseInt(document.querySelector("#s").value);
                removeDataset(s);

            }

            function remAll(){
                removeTodosDatasets();
            }

        </script>
    </body>
</html>


